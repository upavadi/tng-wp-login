# **Wordpress-TNG Login Widget** # 
## **Download**
There is no download version released. You may tryout beta version 1.0.3.beta. 

 - Beta version is under test
 - http://trial.upavadi.net/ 
 - http://www.upavadi.net/

## **License**
The code is licenced under the [MIT licence](http://opensource.org/licenses/MIT)

## **Introduction**
This widget replicates the Wordpress login/log out task and also logs into TNG ( The Next Generation of Genealogy Sitebuilding )](http://www.tngsitebuilding.com/).
- Adds a Registration Form which may replace the Wordpress registration form by deselecting 'Membership>Anyone can register' in Wordpress Dashboard>Settings.
- Adds a User Profile page which saves the changes in Wordpress and TNG database
- Adds an enhanced Password-Reset module which checks for the presence of email of registered user.
- Almost all the text used in pages and emails is customisable by the administrator.
- User may login using either registered user Name or email. On successful login, if User Name exists in TNG database, the user is also logged in to TNG.

## **Compatibility**
- The plugin is under Beta Test and is tested on TNG 10.1.3
- PHP version 5.4 - 5.6.40
-  Wordpress V 4.9 - 5.1 platform
- A Wordpress twenty Twelve child theme. (Not tested in any other theme)

## **Issues**
**WP-TNG Integration** is achieved by displaying TNG content within Wordpress wrapper. 
To my knowledge, there are 2 methods available for achieving this.

1. **Mark Barnes method** (MB-Method) uses a plugin to replace WP page with TNG content.
At the moment, this plugin has some conflicts with displaying TNG media and the issue is not resolved.
2. **Cees Kloosterman Method** (CK-Method) Uses customized Header and Footer files to replace TNG Header and Footer with WP ones. This is a very simple and effective method and I have now converted my live site (and Beta test site) from MB-Method to CK-Method. The plugin is tested using this integration method.
3. **Page Refresh** may be required to see successful TNG login. 


## **Activation**

Wordpress Page | Slug | Shortcode 
---------------|------|----------
Registration   | 'wp-tng-registration'| [user_registration] 
Profile        |  'wp-tng-profile'    |[user_profile]
Reset Password |'wp-tng-resetPassword'| [reset_Password_form]
Lost Password  | 'wp-tng-lostPassword'| [lost_Password_form]

	

	



## Password Reset: 
 - Some Wordpress Password-Reset routines are re-written. 
 -  Password reset is only allowed if the submitted email is in Wordpress database. 
 - If the submitted email is in TNG database only, email is sent to administrator with credential details and submitter is requested to await a response from the administrator.

## Registration Form: 
#### A registration form is included. New registrations are entered in Wordpress and TNG User tables. 
 - In TNG,  user awaits Review.
 - In Wordpress, user is allocated 'Subscriber' role. 
For this to be effective, deselect Membership: Anyone can register in Wordpress Dashboard>Settings. New user will receive an email generated by the plugin.

#### WP-TNG Integration
Integration is achieved by displaying TNG content within Wordpress wrapper. There are 2 main methods of acheiving this.

- CK Method: Replacing TNG Header and footers by Hard coding topmenu.php, footer.php and meta.php
    -  The widget works very well with the CK method
* MB Method: A plugin by Mark Barnes creates a Wordpress 'Post' to display TNG content within Worpress header.

    * At the moment, I am having problem getting it work consistently with MB Method. The plugin uses pseudo wordpress page to display TNG. I am having issues of WP-TNG Login widget work consistently with these pseudo redirects. .
 

issue
Tng page needs refrash to see login success.





#### The Widget has several useful features:




### Developed on TNG V10.1.3 and Wordpress V 4.9 - 5.1 platform.
### Tested PHP V 5.4 - 5.5, Wordpress 4.9 - 5.1 

# Registrtion
### If submitted User Name User Name is in WP or TNG  database and  submitted email is not, error 'User Name in use' is generated.
### If sumbmitted email is in WP or TNG  database, user is requested to Try Password Reset.
### Just one field, 'tng_interest' is added by this plugin in 'wp_usermeta' table. This field is used in New Registration Submission. 

## Login
### Logging in to Wordpress with user name or user email
### If login to Wordpress is successful, user is logged in to TNG


